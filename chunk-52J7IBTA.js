import{a as w}from"./chunk-CLZWIFWZ.js";import{a as y}from"./chunk-TMF6H46K.js";import{a as D}from"./chunk-4PCVNBAZ.js";import{B as l,C as b,G as p,J as m,K as d,L as e,M as t,N as h,Q as f,S as u,T as n,U as c,V as g,aa as C,ea as v,g as x,ha as k,ia as _,ka as M,pa as O,sa as P,wa as S,y as o}from"./chunk-WLOU5G26.js";var I=r=>["/tickets",r];function T(r,a){r&1&&h(0,"app-loading-spinner",5)}function z(r,a){if(r&1&&(e(0,"tr")(1,"td",26),n(2),t(),e(3,"td",27),n(4),t(),e(5,"td")(6,"span",28),n(7),t()(),e(8,"td")(9,"span",29),n(10),t()(),e(11,"td",30),n(12),t(),e(13,"td")(14,"a",31),n(15," View "),t()()()),r&2){let i=a.$implicit,s=f(2);m("data-testid","recent-ticket-row-"+i.id),o(2),c(i.id),o(2),c(i.title),o(2),u(s.getStatusClass(i.status)),o(),g(" ",i.status," "),o(2),u(s.getPriorityClass(i.priority)),o(),g(" ",i.priority," "),o(2),c(s.formatDate(i.updatedAt)),o(2),d("routerLink",C(12,I,i.id)),m("data-testid","view-ticket-"+i.id)}}function L(r,a){r&1&&(e(0,"div",32)(1,"p"),n(2,"No recent tickets to display."),t()())}function A(r,a){if(r&1&&(e(0,"div",6)(1,"section",7)(2,"div",8)(3,"div",9),n(4,"\u{1F3AB}"),t(),e(5,"div",10)(6,"span",11),n(7),t(),e(8,"span",12),n(9,"Open Tickets"),t()()(),e(10,"div",13)(11,"div",14),n(12,"\u{1F4CB}"),t(),e(13,"div",10)(14,"span",11),n(15),t(),e(16,"span",12),n(17,"Assigned to Me"),t()()(),e(18,"div",15)(19,"div",16),n(20,"\u{1F4CA}"),t(),e(21,"div",10)(22,"span",11),n(23),t(),e(24,"span",12),n(25,"Total Tickets"),t()()(),e(26,"div",17)(27,"div",18),n(28,"\u{1F465}"),t(),e(29,"div",10)(30,"span",11),n(31),t(),e(32,"span",12),n(33,"Customers"),t()()()(),e(34,"section",19)(35,"div",20)(36,"h2"),n(37,"Recent Tickets"),t(),e(38,"a",21),n(39," View All \u2192 "),t()(),e(40,"div",22)(41,"table",23)(42,"thead")(43,"tr")(44,"th"),n(45,"ID"),t(),e(46,"th"),n(47,"Title"),t(),e(48,"th"),n(49,"Status"),t(),e(50,"th"),n(51,"Priority"),t(),e(52,"th"),n(53,"Updated"),t(),e(54,"th"),n(55,"Action"),t()()(),e(56,"tbody"),p(57,z,16,14,"tr",24),t()()(),p(58,L,3,0,"div",25),t()()),r&2){let i=f();o(7),c(i.stats.open),o(8),c(i.stats.assignedToMe),o(8),c(i.stats.total),o(8),c(i.customerCount),o(26),d("ngForOf",i.recentTickets),o(),d("ngIf",i.recentTickets.length===0)}}var E=class r{constructor(a,i,s,F){this.ticketService=a;this.customerService=i;this.authService=s;this.cdr=F}loading=!0;stats={open:0,assignedToMe:0,total:0};customerCount=0;recentTickets=[];ngOnInit(){this.loadDashboard()}loadDashboard(){this.loading=!0,x({stats:this.ticketService.getTicketStats(),customers:this.customerService.getCustomers(1,1),recentTickets:this.ticketService.getRecentTickets(5)}).subscribe({next:a=>{this.stats=a.stats,this.customerCount=a.customers.total,this.recentTickets=a.recentTickets,this.loading=!1,this.cdr.detectChanges()},error:a=>{console.error("Failed to load dashboard:",a),this.loading=!1,this.cdr.detectChanges()}})}getStatusClass(a){return a.toLowerCase().replace(" ","-")}getPriorityClass(a){return a.toLowerCase()}formatDate(a){return new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}static \u0275fac=function(i){return new(i||r)(l(w),l(D),l(S),l(v))};static \u0275cmp=b({type:r,selectors:[["app-dashboard"]],decls:8,vars:3,consts:[["data-testid","dashboard-page",1,"dashboard"],[1,"page-header"],[1,"subtitle"],["message","Loading dashboard...",4,"ngIf"],["class","dashboard-content",4,"ngIf"],["message","Loading dashboard..."],[1,"dashboard-content"],[1,"stats-grid"],["data-testid","stat-open-tickets",1,"stat-card"],[1,"stat-icon","open"],[1,"stat-info"],[1,"stat-value"],[1,"stat-label"],["data-testid","stat-assigned-tickets",1,"stat-card"],[1,"stat-icon","assigned"],["data-testid","stat-total-tickets",1,"stat-card"],[1,"stat-icon","total"],["data-testid","stat-customers",1,"stat-card"],[1,"stat-icon","customers"],[1,"recent-tickets"],[1,"section-header"],["routerLink","/tickets","data-testid","view-all-tickets",1,"view-all"],[1,"tickets-table-wrapper"],["data-testid","recent-tickets-table",1,"tickets-table"],[4,"ngFor","ngForOf"],["class","empty-state","data-testid","no-recent-tickets",4,"ngIf"],[1,"ticket-id"],[1,"ticket-title"],[1,"status-badge"],[1,"priority-badge"],[1,"ticket-date"],[1,"action-link",3,"routerLink"],["data-testid","no-recent-tickets",1,"empty-state"]],template:function(i,s){i&1&&(e(0,"div",0)(1,"header",1)(2,"h1"),n(3,"Dashboard"),t(),e(4,"p",2),n(5),t()(),p(6,T,1,0,"app-loading-spinner",3)(7,A,59,6,"div",4),t()),i&2&&(o(5),g("Welcome back, ",s.authService.currentUser==null?null:s.authService.currentUser.username,"!"),o(),d("ngIf",s.loading),o(),d("ngIf",!s.loading))},dependencies:[M,k,_,P,O,y],styles:[".dashboard[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.page-header[_ngcontent-%COMP%]{margin-bottom:32px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,serif;font-size:32px;color:#1a1a2e;margin:0 0 8px}.subtitle[_ngcontent-%COMP%]{color:#666;font-size:16px;margin:0}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;margin-bottom:32px}.stat-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;display:flex;align-items:center;gap:20px;box-shadow:0 2px 8px #0000000f;transition:all .2s ease}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #0000001a}.stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:24px}.stat-icon.open[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e74c3c20,#e74c3c40)}.stat-icon.assigned[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3498db20,#3498db40)}.stat-icon.total[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9b59b620,#9b59b640)}.stat-icon.customers[_ngcontent-%COMP%]{background:linear-gradient(135deg,#27ae6020,#27ae6040)}.stat-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#1a1a2e;line-height:1}.stat-label[_ngcontent-%COMP%]{color:#666;font-size:14px;margin-top:4px}.recent-tickets[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 8px #0000000f}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;color:#1a1a2e;margin:0}.view-all[_ngcontent-%COMP%]{color:#0f3460;text-decoration:none;font-size:14px;font-weight:500;transition:color .2s ease}.view-all[_ngcontent-%COMP%]:hover{color:#e94560}.tickets-table-wrapper[_ngcontent-%COMP%]{overflow-x:auto}.tickets-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.tickets-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .tickets-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #eee}.tickets-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#666;font-size:12px;text-transform:uppercase;letter-spacing:.5px}.tickets-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.ticket-id[_ngcontent-%COMP%]{font-family:Monaco,Consolas,monospace;font-size:13px;color:#666}.ticket-title[_ngcontent-%COMP%]{font-weight:500;color:#1a1a2e;max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ticket-date[_ngcontent-%COMP%]{font-size:13px;color:#666}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:600}.status-badge.open[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-badge.in-progress[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.status-badge.resolved[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.closed[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.priority-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:600}.priority-badge.low[_ngcontent-%COMP%]{background:#e2e3e5;color:#383d41}.priority-badge.medium[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.priority-badge.high[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.priority-badge.critical[_ngcontent-%COMP%]{background:#721c24;color:#fff}.action-link[_ngcontent-%COMP%]{color:#0f3460;text-decoration:none;font-weight:500;font-size:13px}.action-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666}"]})};export{E as DashboardComponent};
