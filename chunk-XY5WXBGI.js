import{a as q}from"./chunk-6QLVMUYJ.js";import{b as D,c as N,f as W,h as V,i as R,j,m as B}from"./chunk-BWQENOGP.js";import{a as Y}from"./chunk-TMF6H46K.js";import{a as G}from"./chunk-4PCVNBAZ.js";import{B as f,C as S,G as p,J as C,K as c,L as t,M as e,N as O,O as L,P as m,Q as u,R as x,S as w,T as i,U as g,V as b,Y as _,Z as h,_ as v,aa as M,ea as E,ha as k,ia as I,ka as F,o as P,p as y,pa as A,sa as z,wa as T,y as r}from"./chunk-WLOU5G26.js";var J=a=>["/customers",a],K=a=>["/customers",a,"edit"];function Q(a,l){a&1&&(t(0,"button",25),i(1," + Add Customer "),e())}function U(a,l){if(a&1&&(t(0,"option",26),i(1),e()),a&2){let n=l.$implicit;c("value",n),r(),g(n)}}function X(a,l){a&1&&O(0,"app-loading-spinner",27),a&2&&c("overlay",!0)}function Z(a,l){if(a&1&&(t(0,"a",37),i(1," Edit "),e()),a&2){let n=u().$implicit;c("routerLink",M(2,K,n.id)),C("data-testid","edit-customer-"+n.id)}}function $(a,l){if(a&1&&(t(0,"tr")(1,"td",28),i(2),e(),t(3,"td",29),i(4),e(),t(5,"td",30),i(6),e(),t(7,"td",31),i(8),e(),t(9,"td")(10,"span",32),i(11),e()(),t(12,"td")(13,"span",33),i(14),e()(),t(15,"td")(16,"div",34)(17,"a",35),i(18," View "),e(),p(19,Z,2,4,"a",36),e()()()),a&2){let n=l.$implicit,o=u();C("data-testid","customer-row-"+n.id),r(2),g(n.id),r(2),g(n.name),r(2),g(n.email),r(2),g(n.company),r(2),w(n.slaLevel.toLowerCase()),r(),b(" ",n.slaLevel," "),r(2),x("active",n.isActive)("inactive",!n.isActive),r(),b(" ",n.isActive?"Active":"Inactive"," "),r(3),c("routerLink",M(16,J,n.id)),C("data-testid","view-customer-"+n.id),r(2),c("ngIf",o.authService.isAdmin)}}function ee(a,l){a&1&&(t(0,"div",38)(1,"p"),i(2,"No customers found matching your criteria."),e()())}function te(a,l){if(a&1){let n=L();t(0,"app-pagination",39),m("pageChange",function(d){P(n);let s=u();return y(s.onPageChange(d))}),e()}if(a&2){let n=u();c("currentPage",n.currentPage)("total",n.total)("pageSize",n.pageSize)}}var H=class a{constructor(l,n,o){this.customerService=l;this.authService=n;this.cdr=o}customers=[];loading=!0;currentPage=1;pageSize=10;total=0;filters={search:"",slaLevel:"",isActive:null};activeFilter="all";slaLevels=["Gold","Silver","Bronze"];filterDebounceTimer;ngOnInit(){this.loadCustomers()}loadCustomers(){this.loading=!0,this.customerService.getCustomers(this.currentPage,this.pageSize,this.filters).subscribe({next:l=>{this.customers=l.customers,this.total=l.total,this.loading=!1,this.cdr.detectChanges()},error:l=>{console.error("Failed to load customers:",l),this.loading=!1,this.cdr.detectChanges()}})}onFilterChange(){clearTimeout(this.filterDebounceTimer),this.filterDebounceTimer=setTimeout(()=>{this.currentPage=1,this.loadCustomers()},300)}onActiveFilterChange(){this.activeFilter==="all"?this.filters.isActive=null:this.activeFilter==="active"?this.filters.isActive=!0:this.filters.isActive=!1,this.currentPage=1,this.loadCustomers()}clearFilters(){this.filters={search:"",slaLevel:"",isActive:null},this.activeFilter="all",this.currentPage=1,this.loadCustomers()}onPageChange(l){this.currentPage=l,this.loadCustomers()}static \u0275fac=function(n){return new(n||a)(f(G),f(T),f(E))};static \u0275cmp=S({type:a,selectors:[["app-customer-list"]],decls:55,vars:11,consts:[["data-testid","customer-list-page",1,"customer-list-page"],[1,"page-header"],[1,"header-content"],[1,"subtitle"],["class","btn-primary","routerLink","/customers/new","data-testid","create-customer-button",4,"ngIf"],["data-testid","customer-filters",1,"filters-section"],[1,"search-box"],["type","text","placeholder","Search by name, email, or company...","data-testid","customer-search",1,"search-input",3,"ngModelChange","ngModel"],[1,"filter-row"],[1,"filter-group"],["data-testid","filter-sla",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["data-testid","filter-active",3,"ngModelChange","ngModel"],["value","all"],["value","active"],["value","inactive"],["data-testid","clear-filters",1,"btn-secondary",3,"click"],[1,"table-section"],[1,"table-container"],[3,"overlay",4,"ngIf"],["data-testid","customer-table",1,"customers-table"],[4,"ngFor","ngForOf"],["class","empty-state","data-testid","no-customers",4,"ngIf"],["testId","customer-list-pagination",3,"currentPage","total","pageSize","pageChange",4,"ngIf"],["routerLink","/customers/new","data-testid","create-customer-button",1,"btn-primary"],[3,"value"],[3,"overlay"],[1,"customer-id"],[1,"customer-name"],[1,"customer-email"],[1,"customer-company"],[1,"sla-badge"],[1,"status-badge"],[1,"actions"],[1,"action-link","view",3,"routerLink"],["class","action-link edit",3,"routerLink",4,"ngIf"],[1,"action-link","edit",3,"routerLink"],["data-testid","no-customers",1,"empty-state"],["testId","customer-list-pagination",3,"pageChange","currentPage","total","pageSize"]],template:function(n,o){n&1&&(t(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1"),i(4,"Customers"),e(),t(5,"p",3),i(6,"Manage customer accounts"),e()(),p(7,Q,2,0,"button",4),e(),t(8,"section",5)(9,"div",6)(10,"input",7),v("ngModelChange",function(s){return h(o.filters.search,s)||(o.filters.search=s),s}),m("ngModelChange",function(){return o.onFilterChange()}),e()(),t(11,"div",8)(12,"div",9)(13,"label"),i(14,"SLA Level"),e(),t(15,"select",10),v("ngModelChange",function(s){return h(o.filters.slaLevel,s)||(o.filters.slaLevel=s),s}),m("ngModelChange",function(){return o.onFilterChange()}),t(16,"option",11),i(17,"All Levels"),e(),p(18,U,2,2,"option",12),e()(),t(19,"div",9)(20,"label"),i(21,"Status"),e(),t(22,"select",13),v("ngModelChange",function(s){return h(o.activeFilter,s)||(o.activeFilter=s),s}),m("ngModelChange",function(){return o.onActiveFilterChange()}),t(23,"option",14),i(24,"All"),e(),t(25,"option",15),i(26,"Active Only"),e(),t(27,"option",16),i(28,"Inactive Only"),e()()(),t(29,"button",17),m("click",function(){return o.clearFilters()}),i(30," Clear Filters "),e()()(),t(31,"section",18)(32,"div",19),p(33,X,1,1,"app-loading-spinner",20),t(34,"table",21)(35,"thead")(36,"tr")(37,"th"),i(38,"ID"),e(),t(39,"th"),i(40,"Name"),e(),t(41,"th"),i(42,"Email"),e(),t(43,"th"),i(44,"Company"),e(),t(45,"th"),i(46,"SLA Level"),e(),t(47,"th"),i(48,"Status"),e(),t(49,"th"),i(50,"Actions"),e()()(),t(51,"tbody"),p(52,$,20,18,"tr",22),e()(),p(53,ee,3,0,"div",23),e(),p(54,te,1,3,"app-pagination",24),e()()),n&2&&(r(7),c("ngIf",o.authService.isAdmin),r(3),_("ngModel",o.filters.search),r(5),_("ngModel",o.filters.slaLevel),r(3),c("ngForOf",o.slaLevels),r(4),_("ngModel",o.activeFilter),r(10),x("loading",o.loading),r(),c("ngIf",o.loading),r(19),c("ngForOf",o.customers),r(),c("ngIf",!o.loading&&o.customers.length===0),r(),c("ngIf",o.total>o.pageSize))},dependencies:[F,k,I,z,A,B,R,j,D,V,N,W,Y,q],styles:[".customer-list-page[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Playfair Display,Georgia,serif;font-size:32px;color:#1a1a2e;margin:0 0 8px}.subtitle[_ngcontent-%COMP%]{color:#666;font-size:15px;margin:0}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0f3460,#16213e);color:#fff;border:none;padding:12px 24px;border-radius:8px;font-weight:600;font-size:14px;cursor:pointer;transition:all .2s ease;text-decoration:none;display:inline-block}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 20px #0f34604d}.btn-secondary[_ngcontent-%COMP%]{background:#f0f0f0;color:#333;border:none;padding:10px 16px;border-radius:6px;font-weight:500;font-size:13px;cursor:pointer;transition:all .2s ease}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e0e0e0}.filters-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;margin-bottom:20px;box-shadow:0 2px 8px #0000000f}.search-box[_ngcontent-%COMP%]{margin-bottom:16px}.search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;transition:all .2s ease}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0f3460;box-shadow:0 0 0 3px #0f34601a}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-end;flex-wrap:wrap}.filter-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;min-width:160px}.filter-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#666;text-transform:uppercase;letter-spacing:.5px}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:6px;font-size:14px;background:#fff;cursor:pointer}.filter-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#0f3460}.table-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:20px;box-shadow:0 2px 8px #0000000f}.table-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container.loading[_ngcontent-%COMP%]{min-height:400px}.customers-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.customers-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .customers-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 16px;text-align:left;border-bottom:1px solid #eee}.customers-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#666;font-size:12px;text-transform:uppercase;letter-spacing:.5px;background:#f8f9fa}.customers-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.customer-id[_ngcontent-%COMP%]{font-family:Monaco,Consolas,monospace;font-size:12px;color:#666}.customer-name[_ngcontent-%COMP%]{font-weight:500;color:#1a1a2e}.customer-email[_ngcontent-%COMP%]{font-size:13px;color:#666}.customer-company[_ngcontent-%COMP%]{font-size:13px;color:#333}.sla-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600}.sla-badge.gold[_ngcontent-%COMP%]{background:gold;color:#333}.sla-badge.silver[_ngcontent-%COMP%]{background:silver;color:#333}.sla-badge.bronze[_ngcontent-%COMP%]{background:#cd7f32;color:#fff}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600}.status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.actions[_ngcontent-%COMP%]{display:flex;gap:12px}.action-link[_ngcontent-%COMP%]{font-size:13px;font-weight:500;text-decoration:none;transition:color .2s ease}.action-link.view[_ngcontent-%COMP%]{color:#0f3460}.action-link.edit[_ngcontent-%COMP%]{color:#27ae60}.action-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}"]})};export{H as CustomerListComponent};
