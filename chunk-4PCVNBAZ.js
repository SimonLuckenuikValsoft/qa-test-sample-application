import{a as i,c as u,j as c,ta as l}from"./chunk-WLOU5G26.js";var h=class n{customers=[];constructor(){this.resetData()}getRandomDelay(){return 250+Math.floor(Math.random()*750)}withDelay(r){return new u(t=>{let e=this.getRandomDelay(),s=setTimeout(()=>{t.next(r),t.complete()},e);return()=>clearTimeout(s)})}withDelayError(r){return new u(t=>{let e=this.getRandomDelay(),s=setTimeout(()=>{t.error(r)},e);return()=>clearTimeout(s)})}resetData(){this.customers=JSON.parse(JSON.stringify(l))}getCustomers(r=1,t=10,e){let s=[...this.customers];if(e){if(e.search){let o=e.search.toLowerCase();s=s.filter(a=>a.name.toLowerCase().includes(o)||a.email.toLowerCase().includes(o)||a.company.toLowerCase().includes(o))}e.slaLevel&&(s=s.filter(o=>o.slaLevel===e.slaLevel)),e.isActive!==null&&e.isActive!==void 0&&(s=s.filter(o=>o.isActive===e.isActive))}let d=s.length,m=(r-1)*t,C=m+t,v=s.slice(m,C);return this.withDelay({customers:v,total:d})}getAllCustomers(){return this.withDelay([...this.customers])}getCustomerById(r){let t=this.customers.find(e=>e.id===r);return this.withDelay(t?i({},t):null)}createCustomer(r){let t=`CUST-${String(this.customers.length+1).padStart(3,"0")}`,e=i({id:t},r);return this.customers.push(e),this.withDelay(i({},e))}updateCustomer(r,t){let e=this.customers.findIndex(s=>s.id===r);return e===-1?this.withDelayError(new Error("Customer not found")):(this.customers[e]=i(i({},this.customers[e]),t),this.withDelay(i({},this.customers[e])))}deleteCustomer(r){if(r==="CUST-ERROR")return this.withDelayError(new Error("Cannot delete customer: This customer has active contracts and cannot be removed. Please contact support for assistance."));let t=this.customers.findIndex(e=>e.id===r);return t===-1?this.withDelayError(new Error("Customer not found")):(this.customers.splice(t,1),this.withDelay(!0))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})};export{h as a};
